schema: '2.0'
stages:
  data_preparation:
    cmd: python prepare_data.py --input_path ../data/census.csv --output_path ../data
    deps:
    - path: ../data/census.csv
      md5: dda410256d8e3ec9d0f1159d550e4990
      size: 3702862
    - path: pipeline_components.py
      md5: acaf1712eb7bfbfd4e4cea7e22185869
      size: 7520
    - path: prepare_data.py
      md5: 613bb9e578904a7ad9f950625a1dbf76
      size: 704
    params:
      params.yaml:
        data.target: salary
        data.test_size: 0.2
        seed: 99
    outs:
    - path: ../data/fitted_data_pipeline.joblib
      md5: d046aa1ace8b185783a97236c45f70a6
      size: 7387
    - path: ../data/test_clean_census.csv
      md5: 0011a91299c805e008a765b9729cf5fe
      size: 716054
    - path: ../data/train_clean_census.csv
      md5: ad4183def0ef7b7eb89fa8a3eab1ae42
      size: 2864561
    - path: ../data/train_processed_census.csv
      md5: dc48728ee1d9bc1ed99115cf29d7fdb9
      size: 8024606
  training:
    cmd: python train_model.py --input_path ../data/train_clean_census.csv --output_path
      .. --pipe_path ../data/fitted_data_pipeline.joblib
    deps:
    - path: ../data/train_clean_census.csv
      md5: ad4183def0ef7b7eb89fa8a3eab1ae42
      size: 2864561
    - path: pipeline_components.py
      md5: 9deab8504251d4e3270f56449821b7c0
      size: 1542
    - path: train_model.py
      md5: 29f8b735ff67dab65efc77e6f7929179
      size: 2067
    params:
      params.yaml:
        data.target: salary
        model:
          penalty: l2
          solver: liblinear
    outs:
    - path: ../model.joblib
      md5: ad9528cfcebfa61ddc94158c9ecf24fd
      size: 9001
  scoring:
    cmd: python score_model.py --input_path ../data/test_clean_census.csv --output_path
      ../data/slice_output.txt --model_path ../model.joblib --variable sex
    deps:
    - path: ../data/test_clean_census.csv
      md5: 0011a91299c805e008a765b9729cf5fe
      size: 716054
    - path: ../model.joblib
      md5: ad9528cfcebfa61ddc94158c9ecf24fd
      size: 9001
    - path: score_model.py
      md5: 99ee0643460929bff9094b9ac032b591
      size: 3342
    params:
      params.yaml:
        data.target: salary
        model:
          penalty: l2
          solver: liblinear
    outs:
    - path: ../data/slice_output.txt
      md5: ca9af4b08b6758afa24d5dda3c98ae8f
      size: 229
  modelling:
    cmd: python train_model.py --input_path_train ../data/train_clean_census.csv --output_path
      .. --pipe_path ../data/fitted_data_pipeline.joblib --variable sex --metrics_path
      ../data/slice_output.txt --input_path_test ../data/test_clean_census.csv
    deps:
    - path: ../data/test_clean_census.csv
      md5: 0011a91299c805e008a765b9729cf5fe
      size: 716054
    - path: ../data/train_clean_census.csv
      md5: ad4183def0ef7b7eb89fa8a3eab1ae42
      size: 2864561
    - path: pipeline_components.py
      md5: acaf1712eb7bfbfd4e4cea7e22185869
      size: 7520
    - path: train_model.py
      md5: 1f78dea0cdeac2944530e7e3bbd2332a
      size: 1618
    params:
      params.yaml:
        data.target: salary
        model:
          penalty: l2
          solver: liblinear
    outs:
    - path: ../data/slice_output.txt
      md5: ca9af4b08b6758afa24d5dda3c98ae8f
      size: 229
    - path: ../model.joblib
      md5: 5a373c0e1ca665a119159d7a1f4cfb50
      size: 8923
